**报告标题：** 【19200127 俞樾】数据库 2022M04 作业

**学号：** 19200127

**姓名：** 俞樾

**日期：** 2022-10-16

# 一、报告内容

1. 第一部分：关于Out-of-order Database Engine

   本文阐述了阅读Out-of-order Database Engine相关文献材料（主要是《Out-of-order Execution of Database Queries》）后对该种类数据库引擎的个人理解。

2. 第二部分：以“Make It Happen”面对梦想

   本文为读《论骑车穿越美国与实现Postgres的相通之处》的心得体会。

3. 编辑工具：Typora

# 二、关于Out-of-order Database Engine

本文主要介绍了乱序数据库执行方法（out-of-order database execution）的原理和重要性。

数据库的处理器基本上会按照程序中书写的机器指令的顺序执行。按照书写顺序执行称为按序执行（In-Order ）。按照书写顺序执行时，如果从内存读取数据的加载指令、除法运算指令等延迟（等待结果的时间）较长的指令后面紧跟着使用该指令结果的指令，就会陷入长时间的等待。尽管这种情况无可奈何，但有时，再下一条指令并不依赖于前面那条延迟较长的指令，只要有了操作数就能执行。此时可以打乱机器指令的顺序，就算指令位于后边，只要可以执行，就先执行。此时，由于数据依赖性而无法立即执行的指令会被延后，因此可以减轻数据灾难的影响。


# 三、以“Make It Happen”面对梦想

读《论骑车穿越美国与实现Postgres的相通之处》心得体会。

##### 1 引言

2015年10月22-24日，中国计算机学会再合肥召开了中国计算机大会（CNCC 2015），大会特邀了来自美国麻省理工学院的图灵奖得主迈克尔·斯通布雷克教授作了报告。七年后的今天，我拜读斯通布雷克教授的这篇《论骑车穿越美国与实现Postgres的相通之处》，仍然为教授高超的学术研究水平、幽默风趣又通俗易懂的语言、面对数据库系统研究开发过程中的困难永不言弃的精神而折服。读完文章，我在对Postgres数据库系统的架构和功能特色方面和面对数据库研究中应采取怎样的态度方面都有了不少收获。
本文主要分为以下两个部分来阐述我读完斯通布雷克教授的特邀报告后的心得体会：①Postgres数据库系统的功能特色；②斯通布雷克教授解决Postgres开发过程中的困难时的态度给予后辈研究者的启示。

##### 2 Postgres数据库系统的功能特色

1984年，现有的Ingres学院版数据库已很难满足学术研究的需要。为此，斯通布雷克教授大胆提出了创设新数据库系统的想法并积极落实，耗费近十年的时间实现了Postgres数据库系统。接下来，我将归纳文章中提到的Postgres系统的三点功能特色。

###### 2.1 抽象数据类型

​	Postgres采用了新的索引结构（R-tree等）来索引新的数据类型，同时优化了数据库语言中对“非”的操作、优化了查询引擎处理新的数据类型的方式，使得数据库能够实现用户指定的函数（user defined function）、用户指定的类型（user defined type）和用户指定的操作（user defined operator）。

###### 2.2 通过“always”关键字实现约束规则

​	Postgres系统的数据库语言中，斯通布雷克教授开创性地提出了通过“always”关键字处理外键约束和主键约束的相关规则：在更新操作中附上“always”关键字即可保证关键字之后的条件在更新过程中一直成立。如此一来便可将外键约束、主键约束和触发器（trigger）机制整合起来，形成一个统一的规则系统。

###### 2.3 无重写存储

​	在Postgres数据库系统实现之前，传统数据库系统处理宕机恢复的方法是将数据库的数据和日志分开存储，每次做更新操作是都需要把更新前与更新后的样子写入日志。这种解决方式需要小心地维护所有的数据和日志，必须时刻保持数据和日志的同步性。这样容易造成代码冗余，且在数据更新量庞大的情况下容易出错。
​	斯通布雷克教授提出的解决方案是“统一存储日志和数据”，在更新操作的时候不对当前数据进行覆盖而是插入一条更新后的数据并加上时间戳。不仅绕过宕机恢复问题，还能实现“时间旅行”的功能。

##### 3 Postgres实现过程中的困难与启示

​	实现新的数据库系统的过程自然不可能是一帆风顺的。斯通布雷克教授在文章中穿插描述了数年前他与妻子骑行横穿美国的独特旅行经历，将数据库开发过程中遇到的困难与骑行过程中遇到的障碍和挫折一一对应，将研究困难形象化，也突出表现了困难解决后的成就感（骑行顺风而行或到达指定的终点）。
​	骑行出发时的踌躇满志与自信，正如当初决定开发Postgres这一新的数据库管理系统时的兴奋；开发抽象数据类型的系统时的思路正如翻越华盛顿的温斯洛普的高山；Postgres的实现正如骑行时面对的不知何时才能走完的路途；无重写存储和“时间旅行”实现过程中的困难正如在泥潭和沼泽里挣扎爬行……
​	但是种种的困难总是能够被克服，只要不停止踩下自行车踏板的脚；尽管缓慢，但只要不停歇地一步一步前进，路途总会穷尽，目的地总能到达——只要你知道那是自己所“想要做的事情”，只要勇敢地去“动手实现”。
​	斯通布雷克教授在文章的末尾说出了他面对人生中的一切困难时的信念：“动手实现（Make It Happen）”。不论是怎样的困难，至少要有开始动手、踏出第一步的勇气，这样才能从“0”跃动到“1”，实现第一步进位。
从获得博士学位、成为加州大学伯克利分校的助理教授、获得终身教职到实现Postgres数据库系统和骑行穿越美国，斯通布雷克教授用“动手实现”这四个字贯彻了他的人生，取得了诸多让人难以望其项背的成就。他用自己作为实例告诉后辈：面对“我要做的事（That’s what I do）”，请“动手实现（Make It Happen）”。
